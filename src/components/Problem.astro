---
import type { Locale } from '@/i18n/utils';

export interface ProblemItem {
  title: string;
  description: string;
  icon: string; // Icon identifier
}

export interface Props {
  title: string;
  items: ProblemItem[];
  locale: Locale;
}

const { title, items, locale } = Astro.props;

// SVG icon mapping
const icons: Record<string, string> = {
  'search': `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>`,
  'door': `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9" /></svg>`,
  'heart': `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" /></svg>`,
  'chart': `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" /></svg>`
};
---

<section
  class="py-12 md:py-16 px-[var(--section-padding-right)] pl-[var(--section-padding-left)] bg-bg-secondary"
  id={locale === 'es' ? 'problema' : 'problem'}
>
  <div class="mx-auto max-w-[1200px]">
    <h2 class="text-center mb-6 text-text-primary section-title">
      {title}
    </h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
      {items.map((item) => (
        <div class="problem-card bg-bg-primary p-4 rounded-md border border-black/[0.06] shadow-sm transition-[transform,box-shadow] duration-base hover:-translate-y-0.5 hover:shadow-md">
          <div class="mb-2">
            <span class="icon inline-flex items-center justify-center w-12 h-12 text-brand-purple-primary" set:html={icons[item.icon] || icons.search}></span>
          </div>
          <h3 class="text-[calc(var(--font-size-2xl)+2px)] font-semibold mb-2 text-text-primary leading-snug">
            {item.title}
          </h3>
          <p class="text-[15px] text-text-tertiary leading-relaxed">
            {item.description}
          </p>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  /* Title responsive font sizing */
  .section-title {
    font-size: clamp(var(--font-size-3xl), 4vw, var(--font-size-4xl));
  }

  /* SVG full width/height within icon wrapper */
  .icon :global(svg) {
    width: 100%;
    height: 100%;
  }
</style>
