---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';

const locale = 'en';
---

<BaseLayout title="Help Center - Minimal" description="Get help and find answers to common questions." locale={locale}>
  <Header locale={locale} />
  <main>
    <section class="hero-section">
      <div class="container">
        <h1>Help Center</h1>
        <p class="subtitle">Get help and find answers to common questions about Minimal.</p>

        <!-- Search Bar -->
        <div class="search-container">
          <input type="text" class="search-input" placeholder="Search documentation..." />
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </div>
      </div>
    </section>

    <!-- Help Categories -->
    <section class="content-section">
      <div class="container">
        <h2>Browse by Category</h2>
        <div class="categories-grid">
          <a href="#getting-started" class="category-card">
            <div class="category-icon">ðŸš€</div>
            <h3>Getting Started</h3>
            <p>Learn the basics and set up Minimal</p>
          </a>

          <a href="#integration" class="category-card">
            <div class="category-icon">ðŸ”Œ</div>
            <h3>Integration Guide</h3>
            <p>Platform-specific setup instructions</p>
          </a>

          <a href="#customization" class="category-card">
            <div class="category-icon">ðŸŽ¨</div>
            <h3>Customization</h3>
            <p>Personalize appearance and behavior</p>
          </a>

          <a href="#analytics" class="category-card">
            <div class="category-icon">ðŸ“Š</div>
            <h3>Analytics</h3>
            <p>Understanding your metrics</p>
          </a>

          <a href="#troubleshooting" class="category-card">
            <div class="category-icon">ðŸ”§</div>
            <h3>Troubleshooting</h3>
            <p>Common issues and solutions</p>
          </a>

          <a href="#api" class="category-card">
            <div class="category-icon">ðŸ’»</div>
            <h3>API Reference</h3>
            <p>Developer documentation</p>
          </a>
        </div>
      </div>
    </section>

    <!-- Getting Started -->
    <section id="getting-started" class="content-section bg-secondary">
      <div class="container">
        <h2>ðŸš€ Getting Started with Minimal</h2>

        <div class="steps-container">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>Create Your Account</h3>
              <p>Sign up at <a href="https://minimal.lat" target="_blank">minimal.lat</a> with your email. You'll get access to the dashboard where you can manage all your sites.</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>Add Your Website</h3>
              <p>Click "Add New Site" in your dashboard, enter your website URL, and you'll receive a unique Site ID. This ID connects Minimal to your website.</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>Install the Script</h3>
              <p>Copy the provided script and paste it before the closing <code>&lt;/body&gt;</code> tag on your website. The widget will appear automatically.</p>
              <div class="code-block">
                <code>&lt;script src="https://minimal.lat/embed.js" data-site-id="your-site-id"&gt;&lt;/script&gt;</code>
              </div>
            </div>
          </div>

          <div class="step">
            <div class="step-number">4</div>
            <div class="step-content">
              <h3>Customize & Launch</h3>
              <p>From your dashboard, customize colors, position, greeting messages, and more. Changes apply instantly â€“ no need to update your code!</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Advanced Customization -->
    <section id="customization" class="content-section">
      <div class="container">
        <h2>ðŸŽ¨ Advanced Customization</h2>

        <h3>Configuration Using Attributes</h3>
        <p>You can customize Minimal directly in the script tag using data attributes:</p>

        <div class="code-block">
          <code>&lt;script
  src="https://minimal.lat/embed.js"
  data-site-id="your-site-id"
  data-position="bottom-right"
  data-theme="auto"
  data-language="en"
&gt;&lt;/script&gt;</code>
        </div>

        <h3>Customization Options</h3>
        <div class="options-list">
          <div class="option-item">
            <strong>Position:</strong> <code>bottom-right</code>, <code>bottom-left</code>, <code>top-right</code>, <code>top-left</code>
          </div>
          <div class="option-item">
            <strong>Theme:</strong> <code>light</code>, <code>dark</code>, <code>auto</code> (follows system preference)
          </div>
          <div class="option-item">
            <strong>Language:</strong> <code>en</code>, <code>es</code>, <code>fr</code>, <code>de</code>, <code>pt</code>, and more
          </div>
          <div class="option-item">
            <strong>Greeting:</strong> Any custom text for the initial message
          </div>
          <div class="option-item">
            <strong>Primary Color:</strong> Hex color code (e.g., <code>#10b981</code>)
          </div>
        </div>

        <h3>Advanced JavaScript Configuration</h3>
        <p>For more control, use JavaScript configuration:</p>

        <div class="code-block">
          <pre><code>window.MinimalConfig = &#123;
  siteId: 'your-site-id',
  position: 'bottom-right',
  theme: 'auto',
  language: 'en',
  greeting: 'Hi there! How can we help?',
  placeholder: 'Type your message...',

  // Advanced options
  autoOpen: false,
  autoOpenDelay: 3000, // milliseconds
  hideOnPages: ['/checkout', '/payment'],
  showOnPages: ['*'], // all pages by default

  // Styling
  customColors: &#123;
    primary: '#10b981',
    background: '#ffffff',
    text: '#1f2937'
  &#125;,

  // Behavior
  collectEmail: true,
  requireEmail: false,
  enableFileUploads: true,
  maxFileSize: 10 // MB
&#125;;

&lt;script src="https://minimal.lat/embed.js"&gt;&lt;/script&gt;</code></pre>
        </div>
      </div>
    </section>

    <!-- Analytics -->
    <section id="analytics" class="content-section bg-secondary">
      <div class="container">
        <h2>ðŸ“Š Understand Your Analytics</h2>

        <div class="analytics-sections">
          <div class="analytics-section">
            <h3>Engagement Metrics</h3>
            <p>Track how visitors interact with your chat:</p>
            <ul>
              <li><strong>Widget Views:</strong> Number of times the widget was displayed</li>
              <li><strong>Open Rate:</strong> Percentage of visitors who opened the chat</li>
              <li><strong>Messages Sent:</strong> Total messages from visitors</li>
              <li><strong>Conversations Started:</strong> New conversation threads</li>
              <li><strong>Average Response Time:</strong> How quickly you respond</li>
            </ul>
          </div>

          <div class="analytics-section">
            <h3>User Insights</h3>
            <p>Understand your visitor behavior:</p>
            <ul>
              <li><strong>Peak Hours:</strong> When visitors are most active</li>
              <li><strong>Popular Pages:</strong> Where conversations start</li>
              <li><strong>Device Breakdown:</strong> Desktop vs. mobile usage</li>
              <li><strong>Geographic Data:</strong> Where your visitors come from</li>
              <li><strong>Returning Visitors:</strong> Track repeat interactions</li>
            </ul>
          </div>

          <div class="analytics-section">
            <h3>Conversion Tracking</h3>
            <p>Measure business impact:</p>
            <ul>
              <li><strong>Lead Capture Rate:</strong> Percentage of chats that collect emails</li>
              <li><strong>Qualified Leads:</strong> Conversations marked as sales-ready</li>
              <li><strong>Goal Completions:</strong> Custom conversion events</li>
              <li><strong>Revenue Attribution:</strong> Sales linked to chat interactions</li>
              <li><strong>ROI Metrics:</strong> Return on investment calculations</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="content-section">
      <div class="container">
        <h2>Frequently Asked Questions</h2>

        <div class="faq-container">
          <details class="faq-item">
            <summary>
              <span class="faq-question">How do I customize the widget colors?</span>
              <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </summary>
            <div class="faq-answer">
              <p>You can customize colors in two ways:</p>
              <ol>
                <li><strong>Dashboard:</strong> Go to Settings â†’ Appearance and use the color picker to choose your brand colors.</li>
                <li><strong>Code:</strong> Use the <code>customColors</code> option in JavaScript configuration:</li>
              </ol>
              <div class="code-block">
                <pre><code>customColors: &#123;
  primary: '#10b981',    // Main accent color
  background: '#ffffff', // Chat background
  text: '#1f2937'       // Text color
&#125;</code></pre>
              </div>
            </div>
          </details>

          <details class="faq-item">
            <summary>
              <span class="faq-question">Can I hide the widget on specific pages?</span>
              <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </summary>
            <div class="faq-answer">
              <p>Yes! Use the <code>hideOnPages</code> configuration option:</p>
              <div class="code-block">
                <code>hideOnPages: ['/checkout', '/payment', '/admin/*']</code>
              </div>
              <p>Supports wildcards for pattern matching. You can also use <code>showOnPages</code> to only display on specific pages.</p>
            </div>
          </details>

          <details class="faq-item">
            <summary>
              <span class="faq-question">How do I integrate with Google Analytics?</span>
              <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </summary>
            <div class="faq-answer">
              <p>Minimal automatically tracks events that you can capture in Google Analytics:</p>
              <div class="code-block">
                <pre><code>window.addEventListener('minimal:message', function(e) &#123;
  gtag('event', 'chat_message_sent', &#123;
    'event_category': 'engagement',
    'event_label': 'Chat Interaction'
  &#125;);
&#125;);</code></pre>
              </div>
              <p>See our <a href="/integration">Integration Guide</a> for more analytics platforms.</p>
            </div>
          </details>

          <details class="faq-item">
            <summary>
              <span class="faq-question">What happens if I reach my plan limits?</span>
              <svg class="faq-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </summary>
            <div class="faq-answer">
              <p>We'll notify you via email when you reach 80% of your plan limits. If you exceed:</p>
              <ul>
                <li><strong>Conversations:</strong> The widget continues working, but you'll need to upgrade to access new conversations in the dashboard.</li>
                <li><strong>Pageviews:</strong> Tracking continues, and you can upgrade anytime to access full analytics.</li>
              </ul>
              <p>Your visitors will never see any interruption in service.</p>
            </div>
          </details>
        </div>
      </div>
    </section>

    <!-- Need More Help -->
    <section class="content-section cta-section">
      <div class="container">
        <div class="cta-box">
          <h2>Need More Help?</h2>
          <p>Can't find what you're looking for? Our support team is here to help.</p>
          <div class="cta-buttons">
            <a href="/contact" class="btn btn-primary">Contact Support</a>
            <a href="https://docs.minimal.lat" class="btn btn-secondary" target="_blank">View Full Docs</a>
          </div>
          <p class="cta-subtext">Average response time: <strong>under 2 hours</strong></p>
        </div>
      </div>
    </section>
  </main>
  <Footer locale={locale} />
</BaseLayout>

<style>
  main { padding-top: 60px; }
  .hero-section { padding: calc(var(--section-padding-y) + var(--space-4)) var(--section-padding-left) var(--section-padding-y) var(--section-padding-right); background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-primary) 100%); text-align: center; }
  .hero-section h1 { font-size: clamp(var(--font-size-3xl), 5vw, var(--font-size-5xl)); margin-bottom: var(--space-3); color: var(--text-primary); font-weight: var(--font-weight-bold); }
  .subtitle { font-size: clamp(calc(var(--font-size-lg) + 1px), 2vw, var(--font-size-2xl)); color: var(--text-secondary); line-height: var(--line-height-relaxed); max-width: 800px; margin: 0 auto; margin-bottom: var(--space-6); }

  /* Search Bar */
  .search-container { position: relative; max-width: 600px; margin: 0 auto; }
  .search-input { width: 100%; padding: var(--space-4) var(--space-5) var(--space-4) var(--space-12); font-size: var(--font-size-lg); border: 2px solid var(--border-primary); border-radius: var(--radius-full); background: var(--bg-primary); color: var(--text-primary); transition: border-color var(--transition-base); }
  .search-input:focus { outline: none; border-color: var(--brand-green); }
  .search-icon { position: absolute; left: var(--space-4); top: 50%; transform: translateY(-50%); width: 24px; height: 24px; color: var(--text-tertiary); pointer-events: none; }

  /* Content Sections */
  .content-section { padding: var(--section-padding-y) var(--section-padding-left) var(--section-padding-y) var(--section-padding-right); }
  .content-section .container { max-width: 1200px; margin: 0 auto; }
  .content-section h2 { color: var(--text-primary); font-size: var(--font-size-3xl); margin-bottom: var(--space-8); text-align: center; }
  .content-section h3 { color: var(--text-primary); font-size: var(--font-size-2xl); margin-top: var(--space-8); margin-bottom: var(--space-4); }
  .content-section p { color: var(--text-secondary); font-size: var(--font-size-lg); line-height: var(--line-height-relaxed); margin-bottom: var(--space-4); }
  .content-section a { color: var(--brand-green); text-decoration: none; }
  .content-section a:hover { text-decoration: underline; }
  .content-section ul, .content-section ol { color: var(--text-secondary); font-size: var(--font-size-lg); line-height: var(--line-height-relaxed); margin-bottom: var(--space-4); padding-left: var(--space-6); }
  .content-section li { margin-bottom: var(--space-2); }
  .content-section code { background: var(--bg-secondary); color: var(--brand-green); padding: 2px 6px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 0.9em; }
  .content-section strong { color: var(--text-primary); }

  .bg-secondary { background: var(--bg-secondary); }

  /* Categories Grid */
  .categories-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--space-6); margin-top: var(--space-8); }
  .category-card { display: flex; flex-direction: column; align-items: center; text-align: center; background: var(--bg-primary); border: 1px solid var(--border-primary); border-radius: var(--radius-lg); padding: var(--space-6); text-decoration: none; transition: all var(--transition-base); }
  .category-card:hover { transform: translateY(-4px); box-shadow: var(--shadow-lg); border-color: var(--brand-green); }
  .category-icon { font-size: 3rem; margin-bottom: var(--space-3); }
  .category-card h3 { color: var(--text-primary); font-size: var(--font-size-xl); margin-bottom: var(--space-2); }
  .category-card p { color: var(--text-secondary); font-size: var(--font-size-base); }

  /* Steps */
  .steps-container { display: flex; flex-direction: column; gap: var(--space-6); margin-top: var(--space-6); max-width: 900px; margin-left: auto; margin-right: auto; }
  .step { display: flex; gap: var(--space-4); align-items: flex-start; }
  .step-number { flex-shrink: 0; width: 48px; height: 48px; background: linear-gradient(135deg, var(--brand-green) 0%, #059669 100%); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: var(--font-size-xl); font-weight: var(--font-weight-bold); }
  .step-content { flex: 1; }
  .step-content h3 { margin-top: 0; }

  /* Code blocks */
  .code-block { background: #0F1419; color: var(--brand-green); padding: var(--space-6); border-radius: var(--radius-md); overflow-x: auto; margin: var(--space-5) 0; box-shadow: var(--shadow-md); border: 1px solid rgba(255, 255, 255, 0.1); }
  .code-block code { font-family: 'Courier New', monospace; font-size: var(--font-size-sm); white-space: pre; display: block; line-height: 1.6; }

  /* Options List */
  .options-list { background: var(--bg-primary); border: 1px solid var(--border-primary); border-radius: var(--radius-lg); padding: var(--space-6); margin: var(--space-6) 0; }
  .option-item { padding: var(--space-3) 0; border-bottom: 1px solid var(--border-primary); }
  .option-item:last-child { border-bottom: none; }
  .option-item strong { color: var(--text-primary); }

  /* Analytics Sections */
  .analytics-sections { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-6); margin-top: var(--space-6); }
  .analytics-section { background: var(--bg-primary); border: 1px solid var(--border-primary); border-radius: var(--radius-lg); padding: var(--space-6); }
  .analytics-section h3 { margin-top: 0; }

  /* FAQ */
  .faq-container { max-width: 900px; margin: 0 auto; }
  .faq-item { background: var(--bg-primary); border: 1px solid var(--border-primary); border-radius: var(--radius-lg); margin-bottom: var(--space-4); overflow: hidden; }
  .faq-item summary { display: flex; align-items: center; justify-content: space-between; padding: var(--space-5); cursor: pointer; font-weight: var(--font-weight-semibold); color: var(--text-primary); user-select: none; transition: background var(--transition-base); }
  .faq-item summary:hover { background: var(--bg-secondary); }
  .faq-item summary::-webkit-details-marker { display: none; }
  .faq-question { font-size: var(--font-size-lg); flex: 1; }
  .faq-icon { width: 24px; height: 24px; transition: transform var(--transition-base); }
  .faq-item[open] .faq-icon { transform: rotate(180deg); }
  .faq-answer { padding: 0 var(--space-5) var(--space-5) var(--space-5); color: var(--text-secondary); line-height: var(--line-height-relaxed); }

  /* CTA Section */
  .cta-section { background: var(--bg-secondary); }
  .cta-box { text-align: center; max-width: 700px; margin: 0 auto; background: var(--bg-primary); border: 1px solid var(--border-primary); border-radius: var(--radius-xl); padding: var(--space-10); }
  .cta-box h2 { margin-bottom: var(--space-3); }
  .cta-buttons { display: flex; gap: var(--space-4); justify-content: center; margin: var(--space-6) 0; flex-wrap: wrap; }
  .btn { padding: var(--space-3) var(--space-6); border-radius: var(--radius-md); font-weight: var(--font-weight-semibold); font-size: var(--font-size-lg); text-decoration: none; transition: all var(--transition-base); display: inline-block; }
  .btn-primary { background: var(--brand-green); color: white; }
  .btn-primary:hover { background: #059669; transform: translateY(-2px); box-shadow: var(--shadow-md); }
  .btn-secondary { background: transparent; color: var(--text-primary); border: 2px solid var(--border-primary); }
  .btn-secondary:hover { border-color: var(--brand-green); color: var(--brand-green); }
  .cta-subtext { color: var(--text-tertiary); font-size: var(--font-size-sm); margin-top: var(--space-4); }

  /* Responsive */
  @media (max-width: 768px) {
    .step { flex-direction: column; text-align: center; }
    .step-number { margin: 0 auto; }
    .categories-grid { grid-template-columns: 1fr; }
    .cta-buttons { flex-direction: column; }
  }
</style>
