---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import PageHero from '@/components/PageHero.astro';
import ContentSection from '@/components/ContentSection.astro';
import SectionTitle from '@/components/SectionTitle.astro';
import CodeBlock from '@/components/CodeBlock.astro';
import CTASection from '@/components/CTASection.astro';
import Button from '@/components/Button.astro';
import StepSection from '@/components/StepSection.astro';
import CategoryCard from '@/components/CategoryCard.astro';
import MetricBox from '@/components/MetricBox.astro';
import InfoBox from '@/components/InfoBox.astro';
import ListCard from '@/components/ListCard.astro';
import FeatureCard from '@/components/FeatureCard.astro';

const locale = 'en';

const gettingStartedSteps = [
  {
    number: 1,
    title: "Create Your Account",
    description: "Sign up at minimal.lat with your email. You'll get access to the dashboard where you can manage all your sites.",
    content: ''
  },
  {
    number: 2,
    title: "Add Your Website",
    description: "Click \"Add New Site\" in your dashboard, enter your website URL, and you'll receive a unique Site ID. This ID connects Minimal to your website.",
    content: ''
  },
  {
    number: 3,
    title: "Install the Script",
    description: "Copy the provided script and paste it before the closing </body> tag on your website. The widget will appear automatically.",
    content: '<div class="bg-[#0F1419] text-[var(--brand-green)] p-6 rounded-lg font-mono text-sm overflow-x-auto"><code>&lt;script src="https://minimal.lat/embed.js" data-site-id="your-site-id"&gt;&lt;/script&gt;</code></div>'
  },
  {
    number: 4,
    title: "Customize & Launch",
    description: "From your dashboard, customize colors, position, greeting messages, and more. Changes apply instantly â€“ no need to update your code!",
    content: ''
  }
];

---

<BaseLayout title="Help Center - Minimal" description="Get help and find answers to common questions." locale={locale}>
  <Header locale={locale} />

  <main class="pt-header">
    <PageHero
      title="Help Center"
      subtitle="Get help and find answers to common questions about Minimal."
    />

    <!-- Help Categories -->
    <ContentSection>
      <SectionTitle title="Browse by Category" centered={true} />
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8">
        <CategoryCard
          href="#getting-started"
          icon="rocket"
          title="Getting Started"
          description="Learn the basics and set up Minimal"
        />
        <CategoryCard
          href="#integration"
          icon="puzzle-piece"
          title="Integration Guide"
          description="Platform-specific setup instructions"
        />
        <CategoryCard
          href="#customization"
          icon="paint-brush"
          title="Customization"
          description="Personalize appearance and behavior"
        />
        <CategoryCard
          href="#analytics"
          icon="chart-bar"
          title="Analytics"
          description="Understanding your metrics"
        />
        <CategoryCard
          href="#best-practices"
          icon="pencil-square"
          title="Best Practices"
          description="Writing effective conversations"
        />
        <CategoryCard
          href="#conversation-design"
          icon="chat-bubble-left-right"
          title="Conversation Design"
          description="Design natural conversation flows"
        />
        <CategoryCard
          href="#troubleshooting"
          icon="wrench"
          title="Troubleshooting"
          description="Common issues and solutions"
        />
        <CategoryCard
          href="#api"
          icon="code"
          title="API Reference"
          description="Developer documentation"
          comingSoon={true}
        />
      </div>
    </ContentSection>

    <!-- Getting Started -->
    <ContentSection id="getting-started" background="secondary" className="scroll-mt-32">
      <SectionTitle title="Getting Started with Minimal" />
      <StepSection steps={gettingStartedSteps} />
    </ContentSection>

    <!-- Integration Guide -->
    <ContentSection id="integration" className="scroll-mt-32">
      <div class="max-w-4xl mx-auto">
        <SectionTitle title="Integration Guide" centered={true} />
        <p class="text-center text-xl text-[var(--text-secondary)] mb-8 max-w-4xl mx-auto leading-relaxed">Choose your platform and follow the installation instructions. Need help? Check our <a href="/integration" class="text-[var(--brand-green)] hover:underline">detailed integration page</a>.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <InfoBox
            icon="code"
            title="Web Platforms"
            description="Install Minimal on any website with a simple one line script tag. Works with HTML, JavaScript, and all modern frameworks including React, Vue, Angular, and Next.js."
            variant="tertiary"
          />

          <InfoBox
            icon="shopping-cart"
            title="E-commerce & CMS"
            description="Native integrations for popular platforms with easy dashboard configuration."
            items={[
              'WordPress - Plugin from repository',
              'Webflow - Custom code integration',
              'Framer - Custom code component',
              'Wix - Custom code integration',
              'Squarespace - Code injection'
            ]}
            variant="tertiary"
            comingSoon={true}
          />
        </div>
      </div>
    </ContentSection>

    <!-- Dashboard Customization -->
    <ContentSection id="customization" background="secondary" className="scroll-mt-32">
      <div class="max-w-4xl mx-auto">
        <SectionTitle title="Dashboard Customization" centered={true} />
        <p class="text-center text-xl text-[var(--text-secondary)] mb-8 max-w-4xl mx-auto leading-relaxed">Customize your widget appearance directly from the Minimal dashboard - no code required.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <InfoBox
            icon="cursor-arrow-rays"
            title="Chat Button"
            description="Control where and how the chat button appears on your website."
            items={[
              'Button Position: Bottom Right, Bottom Left, Top Right, Top Left',
              'Button Color: Choose any color to match your brand'
            ]}
            variant="tertiary"
          />

          <InfoBox
            icon="paint-brush"
            title="Brand Colors"
            description="Make the widget feel like a native part of your website."
            items={[
              'Primary Color: Main brand color for accents and highlights',
              'Secondary Color: Secondary brand color for additional styling'
            ]}
            variant="tertiary"
          />

          <InfoBox
            icon="cog"
            title="Features"
            description="Toggle features on or off to customize the user experience."
            items={[
              'Welcome Phrases: Display rotating welcome messages before user starts chatting'
            ]}
            variant="tertiary"
          />

          <InfoBox
            icon="sparkles"
            title="Easy to Use"
            description="All customization options are available in your dashboard under Widget Configuration. Changes are applied instantly - no need to update any code on your website."
            variant="tertiary"
          />
        </div>
      </div>
    </ContentSection>

    <!-- Advanced Script Customization -->
    <ContentSection id="advanced-customization" className="scroll-mt-32">
      <div class="max-w-4xl mx-auto">
        <SectionTitle title="Advanced Script Customization" centered={true} />
        <p class="text-center text-xl text-[var(--text-secondary)] mb-8 max-w-4xl mx-auto leading-relaxed">For developers who need more control, advanced script configuration options will be available soon.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <InfoBox
            icon="code"
            title="Data Attributes"
            description="Customize Minimal directly in the script tag using data attributes for position, theme, language, and more."
            variant="tertiary"
            comingSoon={true}
          />

          <InfoBox
            icon="command-line"
            title="JavaScript API"
            description="Full programmatic control with JavaScript configuration objects for advanced use cases."
            variant="tertiary"
            comingSoon={true}
          />
        </div>
      </div>
    </ContentSection>

    <!-- Analytics -->
    <ContentSection id="analytics" background="secondary" className="scroll-mt-32">
      <div class="max-w-5xl mx-auto">
        <SectionTitle title="Understand Your Analytics" centered={true} />
        <p class="text-center text-xl text-[var(--text-secondary)] mb-8 max-w-4xl mx-auto leading-relaxed">Get insights into how visitors interact with your conversational interface.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <InfoBox
            icon="chart-bar"
            title="Key Metrics"
            description="Track your most important conversation metrics at a glance:"
            items={[
              'Total Conversations: Number of chats in the last 30 days',
              'Active Conversations: Currently ongoing chats',
              'Total Messages: All messages exchanged over time',
              'Avg Messages per Conversation: Conversation depth indicator'
            ]}
            variant="tertiary"
          />

          <InfoBox
            icon="arrow-trending-up"
            title="Conversations Over Time"
            description="Visualize conversation trends with an interactive line chart showing daily conversation volume over the past month."
            variant="tertiary"
          />

          <InfoBox
            icon="chart-pie"
            title="Status Distribution"
            description="See how your conversations end with a breakdown of:"
            items={[
              'Completed: Successfully finished conversations',
              'Active: Ongoing conversations',
              'Abandoned: Conversations left without resolution'
            ]}
            variant="tertiary"
          />

          <InfoBox
            icon="face-smile"
            title="Sentiment Analysis"
            description="Understand user satisfaction through automatic sentiment detection:"
            items={[
              'Positive: Happy and satisfied interactions',
              'Neutral: Informational exchanges',
              'Negative: Frustrated or unsatisfied users'
            ]}
            variant="tertiary"
          />

          <InfoBox
            icon="sparkles"
            title="Engagement Trend"
            description="Monitor your Average Engagement Score over time to see how well your AI is connecting with visitors."
            variant="tertiary"
          />

          <InfoBox
            icon="light-bulb"
            title="Top Intents & Token Usage"
            description="Discover what users are asking about most and track your token consumption to manage usage effectively."
            variant="tertiary"
          />
        </div>
      </div>
    </ContentSection>

    <!-- Best Practices -->
    <ContentSection id="best-practices" className="scroll-mt-32">
      <div class="max-w-4xl mx-auto">
        <SectionTitle title="Writing Effective Conversations" centered={true} />
        <p class="text-center text-xl text-[var(--text-secondary)] mb-8 max-w-4xl mx-auto leading-relaxed">Craft messages that engage users and drive conversions.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <ListCard
            title="Best Practices"
            items={[
              'Keep greetings warm and conversational, not corporate',
              'Ask open-ended questions to understand user needs',
              'Provide quick replies for common questions',
              "Use your brand's voice and personality",
              'Set expectations for response times'
            ]}
            bulletType="checkmark"
          />

          <ListCard
            title="What to Avoid"
            items={[
              'Generic greetings like "Hello" or "Welcome"',
              'Overly formal or robotic language',
              'Asking for information you already have',
              'Too many messages at once (overwhelming users)',
              'Unclear calls-to-action'
            ]}
            bulletType="x"
          />
        </div>
      </div>
    </ContentSection>

    <!-- Conversation Design -->
    <ContentSection id="conversation-design" background="secondary" className="scroll-mt-32">
      <div class="max-w-4xl mx-auto">
        <SectionTitle title="Conversation Design" centered={true} />
        <p class="text-center text-xl text-[var(--text-secondary)] mb-8 max-w-4xl mx-auto leading-relaxed">Design conversation flows that feel natural and guide users to their goals.</p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <FeatureCard
            icon="chat-bubble-left-right"
            title="Natural Flow"
            description="Keep conversations feeling human and helpful. Use short messages, ask one question at a time, and acknowledge user responses before moving forward."
          />
          <FeatureCard
            icon="arrow-path"
            title="Quick Replies"
            description="Offer suggested responses for common questions. This speeds up interactions and helps users who aren't sure what to ask."
          />
          <FeatureCard
            icon="light-bulb"
            title="Smart Routing"
            description="Guide users to the right information based on their questions. Use context from previous messages to provide relevant follow-ups."
          />
          <FeatureCard
            icon="check-circle"
            title="Clear CTAs"
            description="Every conversation should have a purpose. Make it easy for users to take the next step with clear, actionable suggestions."
          />
        </div>
      </div>
    </ContentSection>

    <!-- Troubleshooting -->
    <ContentSection id="troubleshooting" className="scroll-mt-32">
      <div class="max-w-4xl mx-auto">
        <SectionTitle title="Troubleshooting" centered={true} />
        <p class="text-center text-xl text-[var(--text-secondary)] mb-8 max-w-4xl mx-auto leading-relaxed">Common issues and how to resolve them.</p>

        <div class="space-y-6">
          <div class="bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-md p-6">
            <h3 class="text-xl text-[var(--text-primary)] font-semibold mb-3">Widget Not Appearing</h3>
            <p class="text-[var(--text-secondary)] mb-3">If the widget doesn't show up on your site:</p>
            <ul class="list-disc pl-6 space-y-2 text-[var(--text-secondary)]">
              <li>Verify the script is placed before the closing <code class="bg-[var(--bg-tertiary)] text-[var(--brand-green)] px-2 py-1 rounded text-sm">&lt;/body&gt;</code> tag</li>
              <li>Check that your Site ID is correct in the dashboard</li>
              <li>Ensure JavaScript is enabled in your browser</li>
              <li>Clear your browser cache and hard reload (Ctrl+Shift+R or Cmd+Shift+R)</li>
              <li>Check browser console for any error messages</li>
            </ul>
          </div>

          <div class="bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-md p-6">
            <h3 class="text-xl text-[var(--text-primary)] font-semibold mb-3">Widget Position Issues</h3>
            <p class="text-[var(--text-secondary)] mb-3">If the widget appears in the wrong position or overlaps other elements:</p>
            <ul class="list-disc pl-6 space-y-2 text-[var(--text-secondary)]">
              <li>Adjust the position setting in your dashboard (bottom-right, bottom-left, etc.)</li>
              <li>Check for CSS conflicts with high z-index values on your site</li>
              <li>Use custom CSS to override positioning if needed</li>
              <li>Try different offset values to avoid overlapping with other fixed elements</li>
            </ul>
          </div>

          <div class="bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-md p-6">
            <h3 class="text-xl text-[var(--text-primary)] font-semibold mb-3">Conversations Not Saving</h3>
            <p class="text-[var(--text-secondary)] mb-3">If conversations aren't appearing in your dashboard:</p>
            <ul class="list-disc pl-6 space-y-2 text-[var(--text-secondary)]">
              <li>Verify you're logged into the correct account</li>
              <li>Check that you're viewing the correct site in the dashboard</li>
              <li>Ensure your plan hasn't reached conversation limits</li>
              <li>Allow a few minutes for data synchronization</li>
              <li>Contact support if the issue persists after 15 minutes</li>
            </ul>
          </div>

          <div class="bg-[var(--bg-primary)] border border-[var(--border-primary)] rounded-md p-6">
            <h3 class="text-xl text-[var(--text-primary)] font-semibold mb-3">Styling Not Applied</h3>
            <p class="text-[var(--text-secondary)] mb-3">If custom colors or styles aren't showing:</p>
            <ul class="list-disc pl-6 space-y-2 text-[var(--text-secondary)]">
              <li>Changes in the dashboard apply instantly - no code updates needed</li>
              <li>Clear browser cache to see latest styling changes</li>
              <li>Check that custom CSS isn't overriding your settings</li>
              <li>Verify color values are in valid hex format (e.g., #10b981)</li>
            </ul>
          </div>
        </div>
      </div>
    </ContentSection>

    <!-- API Reference -->
    <ContentSection id="api" className="scroll-mt-32">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-4xl md:text-5xl font-bold text-[var(--text-primary)] text-center mb-6">
          API Reference <span class="coming-soon-badge-inline align-middle">Coming soon</span>
        </h2>
        <p class="text-center text-xl text-[var(--text-secondary)] mb-8 max-w-4xl mx-auto leading-relaxed">JavaScript API for advanced control and customization.</p>

        <h3 class="text-2xl text-[var(--text-primary)] font-semibold mb-4">Widget Control Methods</h3>
        <div class="bg-[var(--bg-tertiary)] border border-[var(--border-primary)] rounded-md p-6 mb-6">
          <CodeBlock code={`// Open the widget
Minimal.open();

// Close the widget
Minimal.close();

// Toggle widget state
Minimal.toggle();

// Check if widget is open
const isOpen = Minimal.isOpen(); // returns boolean

// Destroy the widget instance
Minimal.destroy();`} />
        </div>

        <h3 class="text-2xl text-[var(--text-primary)] font-semibold mb-4 mt-8">Event Tracking</h3>
        <div class="bg-[var(--bg-tertiary)] border border-[var(--border-primary)] rounded-md p-6 mb-6">
          <CodeBlock code={`// Track custom events
Minimal.trackEvent('event_name', {
  customData: 'value',
  userId: '12345'
});

// Set user context
Minimal.setContext({
  userId: 'user_123',
  email: 'user@example.com',
  plan: 'premium'
});

// Identify user
Minimal.identify({
  userId: 'user_123',
  name: 'John Doe',
  email: 'john@example.com'
});`} />
        </div>

        <h3 class="text-2xl text-[var(--text-primary)] font-semibold mb-4 mt-8">Event Listeners</h3>
        <div class="bg-[var(--bg-tertiary)] border border-[var(--border-primary)] rounded-md p-6 mb-6">
          <CodeBlock code={`// Listen for widget events
window.addEventListener('minimal:open', () => {
  console.log('Widget opened');
});

window.addEventListener('minimal:close', () => {
  console.log('Widget closed');
});

window.addEventListener('minimal:message', (event) => {
  console.log('Message sent:', event.detail);
});

window.addEventListener('minimal:ready', () => {
  console.log('Widget initialized');
});`} />
        </div>

        <h3 class="text-2xl text-[var(--text-primary)] font-semibold mb-4 mt-8">Configuration Updates</h3>
        <div class="bg-[var(--bg-tertiary)] border border-[var(--border-primary)] rounded-md p-6">
          <CodeBlock code={`// Update configuration at runtime
Minimal.updateConfig({
  theme: 'dark',
  position: 'bottom-left',
  greeting: 'New greeting message'
});

// Get current configuration
const config = Minimal.getConfig();`} />
        </div>
      </div>
    </ContentSection>

    <!-- Need More Help -->
    <CTASection
      title="Need More Help?"
      description="Can't find what you're looking for? Our support team is here to help."
      background="secondary"
    >
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <Button variant="primary" size="lg" href="/contact">
          Contact Support
        </Button>
      </div>
    </CTASection>
  </main>

  <Footer locale={locale} />
</BaseLayout>
