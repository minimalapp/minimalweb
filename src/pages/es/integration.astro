---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import PageHero from '@/components/PageHero.astro';
import ContentSection from '@/components/ContentSection.astro';
import SectionTitle from '@/components/SectionTitle.astro';
import CodeBlock from '@/components/CodeBlock.astro';
import FeatureCard from '@/components/FeatureCard.astro';
import Button from '@/components/Button.astro';
import ListCard from '@/components/ListCard.astro';
import CTASection from '@/components/CTASection.astro';
import Icon from '@/components/Icon.astro';

const locale = 'es';
---

<BaseLayout title="Integración - Minimal" description="Integra Minimal con tu plataforma en minutos." locale={locale}>
  <Header locale={locale} />

  <main class="pt-header">
    <PageHero
      title="Integración de Plataforma"
      subtitle="Integra Minimal con tu plataforma en minutos. Compatible con todas las principales tecnologías web."
    />

    <ContentSection>
      <SectionTitle title="Plataformas Soportadas" centered={true} />
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8">
        <FeatureCard icon="react" title="React" description="Integración perfecta con aplicaciones React usando nuestra biblioteca de componentes oficial." href="#react" />
        <FeatureCard icon="angular" title="Angular" description="Módulo nativo Angular con soporte TypeScript e inyección de dependencias." href="#angular" />
        <FeatureCard icon="vue" title="Vue.js" description="Plugin Vue 3 con soporte composition API y gestión de estado reactivo." href="#vue" />
        <FeatureCard icon="next" title="Next.js" description="Optimizado para Next.js con soporte SSR y división automática de código." href="#nextjs" />
        <FeatureCard icon="bolt" title="WordPress" description="Plugin simple de WordPress - instala y configura en tu panel de administración." href="#wordpress" />
        <FeatureCard icon="shopping-bag" title="Shopify" description="Integración de aplicación Shopify para tiendas de comercio electrónico con seguimiento de carrito." href="#shopify" />
      </div>
    </ContentSection>

    <ContentSection background="secondary">
      <div class="max-w-4xl mx-auto">
      <SectionTitle title="Instalación Universal" centered={true} />
      <p class="text-center text-xl text-[var(--text-secondary)] mb-6 max-w-4xl mx-auto leading-relaxed">Funciona con cualquier sitio web independientemente del stack tecnológico:</p>

      <h3 id="html" class="text-2xl text-[var(--text-primary)] font-semibold mb-4 scroll-mt-32">Sitios Web HTML</h3>
      <p class="text-lg text-[var(--text-secondary)] leading-relaxed mb-4">Añade antes de la etiqueta de cierre &lt;/body&gt;:</p>
      <CodeBlock code={`<script src="https://minimal.lat/embed.js" data-site-id="your-site-id"></script>`} />

      <h3 id="react" class="text-2xl text-[var(--text-primary)] font-semibold mb-4 scroll-mt-32">Aplicaciones React</h3>
      <p class="text-lg text-[var(--text-secondary)] leading-relaxed mb-4">Instala vía npm y usa como componente:</p>
      <CodeBlock code={`npm install @minimal/react
import { MinimalChat } from '@minimal/react';

function App() {
  return (
    <div>
      <MinimalChat siteId="your-site-id" />
    </div>
  );
}`} />

      <h3 id="angular" class="text-2xl text-[var(--text-primary)] font-semibold mb-4 scroll-mt-32">Aplicaciones Angular</h3>
      <p class="text-lg text-[var(--text-secondary)] leading-relaxed mb-4">Instala vía npm e importa en tu módulo:</p>
      <CodeBlock code={`npm install @minimal/angular

import { MinimalModule } from '@minimal/angular';

@NgModule({
  imports: [
    MinimalModule.forRoot({ siteId: 'your-site-id' })
  ]
})
export class AppModule { }`} />

      <h3 id="vue" class="text-2xl text-[var(--text-primary)] font-semibold mb-4 scroll-mt-32">Aplicaciones Vue.js</h3>
      <p class="text-lg text-[var(--text-secondary)] leading-relaxed mb-4">Instala vía npm y usa como plugin:</p>
      <CodeBlock code={`npm install @minimal/vue
import { createApp } from 'vue';
import MinimalPlugin from '@minimal/vue';

const app = createApp(App);
app.use(MinimalPlugin, { siteId: 'your-site-id' });`} />

      <h3 id="nextjs" class="text-2xl text-[var(--text-primary)] font-semibold mb-4 scroll-mt-32">Aplicaciones Next.js</h3>
      <p class="text-lg text-[var(--text-secondary)] leading-relaxed mb-4">Instala vía npm y añade a tu layout o componente app:</p>
      <CodeBlock code={`npm install @minimal/react

// app/layout.tsx (App Router)
import { MinimalChat } from '@minimal/react';

export default function RootLayout({ children }) {
  return (
    <html>
      <body>
        {children}
        <MinimalChat siteId="your-site-id" />
      </body>
    </html>
  );
}`} />

      <div class="space-y-6">
        <div id="wordpress" class="scroll-mt-32">
        <ListCard
          title="WordPress"
          description="Instala el plugin y configura en Ajustes → Minimal:"
          items={[
            'Descarga el plugin Minimal desde el repositorio de WordPress',
            'Sube y activa en Plugins → Añadir Nuevo',
            'Navega a Ajustes → Minimal',
            'Ingresa tu ID de Sitio y personaliza la apariencia',
            'Guarda los cambios - el widget aparece automáticamente'
          ]}
        />
        </div>

        <div id="shopify" class="scroll-mt-32">
        <ListCard
          title="Tiendas Shopify"
          description="Instala desde la Tienda de Aplicaciones de Shopify:"
          items={[
            'Visita la Tienda de Aplicaciones de Shopify y busca Minimal',
            'Haz clic en Instalar Aplicación y autoriza los permisos',
            'Ingresa tu ID de Sitio en la configuración de la aplicación',
            'Personaliza la apariencia del widget',
            'El widget aparece automáticamente en todas las páginas'
          ]}
        />
        </div>
      </div>
      </div>
    </ContentSection>

    <ContentSection>
      <div class="max-w-4xl mx-auto">
      <SectionTitle title="Configuración Avanzada" centered={true} />

      <h3 class="text-2xl text-[var(--text-primary)] font-semibold mb-4">Disparadores Personalizados</h3>
      <p class="text-lg text-[var(--text-secondary)] leading-relaxed mb-4">Abre el widget basado en acciones del usuario:</p>
      <CodeBlock code={`// Open after time delay
setTimeout(() => {
  Minimal.open();
}, 30000); // 30 seconds

// Open on exit intent
document.addEventListener('mouseout', (e) => {
  if (e.clientY < 0) {
    Minimal.open();
  }
});

// Open on scroll depth
window.addEventListener('scroll', () => {
  const scrolled = (window.scrollY / document.body.scrollHeight) * 100;
  if (scrolled > 50 && !Minimal.isOpen()) {
    Minimal.open();
  }
});`} />

      <h3 class="text-2xl text-[var(--text-primary)] font-semibold mb-4">Seguimiento de Comercio Electrónico</h3>
      <p class="text-lg text-[var(--text-secondary)] leading-relaxed mb-4">Envía datos de carrito y producto a la IA:</p>
      <CodeBlock code={`// Track product views
Minimal.trackEvent('product_view', {
  productId: '12345',
  productName: 'Premium Widget',
  price: 99.99
});

// Track cart updates
Minimal.trackEvent('add_to_cart', {
  items: cartItems,
  total: cartTotal
});

// Pre-fill checkout questions
Minimal.setContext({
  cartValue: 299.99,
  items: ['Widget A', 'Widget B']
});`} />

      <h3 class="text-2xl text-[var(--text-primary)] font-semibold mb-4">Identificación de Usuario</h3>
      <p class="text-lg text-[var(--text-secondary)] leading-relaxed mb-4">Identifica usuarios recurrentes:</p>
      <CodeBlock code={`// Set user information
Minimal.identify({
  userId: 'user_123',
  email: 'john@example.com',
  name: 'John Doe',
  plan: 'premium',
  customAttributes: {
    signupDate: '2024-01-15',
    lastPurchase: '2024-03-20'
  }
});`} />
      </div>
    </ContentSection>

    <CTASection
      title="¿Necesitas Ayuda con la Integración?"
      description="Nuestro equipo puede ayudar con integraciones personalizadas y configuración técnica."
      background="secondary"
    >
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <Button variant="primary" size="lg" href="/es/help">
          Ver Documentación
        </Button>
        <Button variant="secondary" size="lg" href="/es/contact">
          Contactar Soporte
        </Button>
      </div>
    </CTASection>
  </main>

  <Footer locale={locale} />
</BaseLayout>
